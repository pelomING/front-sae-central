<p-card header="">
  <div class="card" >
      <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">

          <label for="password" class="block text-900 font-medium text-xl mb-2">Contraseña actual:</label>
          <span class="p-input-icon-left" style="padding-bottom:0%;margin-bottom:0%;height:55px;" >
            <i class="pi pi-key"></i>
            <p-password id="currentPassword" formControlName="currentPassword" [feedback]="false" placeholder="" styleClass="mb-5"
              [toggleMask]="true" inputStyleClass="w-full p-3 md:w-30rem"></p-password>
          </span>

          <hr>

          <label for="password" class="block text-900 font-medium text-xl mb-2">Nueva contraseña:</label>
          <span class="p-input-icon-left" style="padding-bottom:0%;margin-bottom:0%;height:55px;" >
            <i class="pi pi-key"></i>
            <p-password id="newPassword" formControlName="newPassword" [feedback]="false" placeholder="" styleClass="mb-5"
              [toggleMask]="true" inputStyleClass="w-full p-3 md:w-30rem"></p-password>
          </span>

          <div *ngIf="changePasswordForm.get('newPassword').invalid && (changePasswordForm.get('newPassword').dirty || changePasswordForm.get('newPassword').touched)">
            <mat-error *ngIf="changePasswordForm.get('newPassword').hasError('required')">
              La nueva contraseña es requerida.
            </mat-error>
            <mat-error *ngIf="changePasswordForm.get('newPassword').hasError('minlength')">
              La contraseña debe tener al menos 8 caracteres.
            </mat-error>
            <mat-error *ngIf="changePasswordForm.get('newPassword').hasError('invalidPassword')">
              La contraseña debe contener al menos un número, una mayúscula, una minúscula y un carácter especial.
            </mat-error>
          </div>      

          <hr>

          <label for="password" class="block text-900 font-medium text-xl mb-2">Confirmar nueva contraseña:</label>
          <span class="p-input-icon-left" style="padding-bottom:0%;margin-bottom:0%;height:55px;" >
            <i class="pi pi-key"></i>
            <p-password id="confirmPassword" formControlName="confirmPassword" [feedback]="false" placeholder="" styleClass="mb-5"
              [toggleMask]="true" inputStyleClass="w-full p-3 md:w-30rem"></p-password>
          </span>

          <div *ngIf="changePasswordForm.get('confirmPassword').hasError('mismatch')">
            <mat-error>Las contraseñas no coinciden.</mat-error>
          </div>
          
          <hr>

          <button type="submit" [loading]="loading" pButton pRipple label="Cambiar Contraseña" 
          class="w-full p-3 text-xl md:w-30rem" [disabled]="changePasswordForm.invalid" ></button>
      
      </form>
  </div>
</p-card>
<p-confirmDialog [style]="{ width: '450px' }"></p-confirmDialog>
<p-toast></p-toast>

<p-dialog [(visible)]="visible" [modal]="true" [closable]="false" maximized="true" [style]="{ 'width': '100%', 'height': '100%' }" > 
  <div class="flex align-items-center justify-content-center" [style]="{ 'width': '100%', 'height': '100%' }" >
      <i class="pi pi-spin pi-cog" style="font-size: 2.5rem"></i> 
      &nbsp;&nbsp;
      <span>Contraeña modificada cerrando sistema ...</span> 
  </div>
</p-dialog>